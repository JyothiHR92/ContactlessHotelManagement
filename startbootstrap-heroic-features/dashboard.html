<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Heroic Features - Start Bootstrap Template</title>

  <!-- Bootstrap core CSS -->
  <!--<link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">-->

  <!-- Custom styles for this template -->
  <link href="css/heroic-features.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"
  integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog=="
  crossorigin="anonymous" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" ></script>
  <!--<style>
    .bs-example{
        margin: 20px;
    }
  </style>-->
  <!--<style> 
    #footer { 
        position: fixed; 
        padding: 10px 10px 0px 10px; 
        bottom: 0; 
        width: 100%; 
        /* Height of the footer*/  
        height: 40px; 
        
    } 
</style> -->
<!--<style>
  .modal {
  
  position: absolute;
  float: left;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
}


</style>-->
<style type="text/css">
  .jumbotron{
          background-image: url("https://landingimage.s3.amazonaws.com/banner1.jpeg");
          background-repeat: no-repeat, repeat;
          background-position: center; /* Center the image */
          background-size: cover; /* Resize the background image to cover the entire container */
          padding-top: 50px;
          font-weight: bold;
          margin-top: 100px;
          margin-bottom: 100px;
          padding: 100px;
          /*border-radius: 50px;
          /*box-shadow: 10px 10px 5px 0px rgba(0,0,0,0.75);*/
        }
</style>
</head>

<body onload="myFunction()">
<script>
function myFunction() {
  console.log('myfuntion')
  customer_id = sessionStorage.getItem('sub')
  console.log('customer id' + customer_id)
  let url = 'https://r1mse841y7.execute-api.us-east-1.amazonaws.com/dev/getReservation?customer_id='+customer_id;
  console.log(url)
  axios.get(url)
      .then(function (response) {
      //resultElement.innerHTML = generateSuccessHTMLOutput(response);
      console.log(response)
      console.log('here in get of reservation')
     if(response.data.data[0].isCheckedIn == 1){
          document.getElementById('yourstay').style="display:block"
          document.getElementById('bot').style="display:block"
      }
  })
};
</script>

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-dark  fixed-top" style="background-color:  #ff9800;">
    <div class="container">
      <a class="navbar-brand text-dark" href="#">
        <h4>EZEE HOTELS</h4>
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
            <li class = "nav-item">
                <p class= "text-dark my-2 mr-sm-2" id="getuser" ></p>
                <script type="text/javascript">
                document.getElementById('getuser').innerText= 'Hello, ' + sessionStorage.getItem('username');
                </script>
            </li>
            <li class="nav-item">
                <button class="btn btn-primary my-2 mr-sm-2" onclick="getMenu()"type="submit" >User Dashboard</button>
              </li>
              <li class="nav-item" id = "yourstay" style = "display:none">
                <button class="btn btn-primary my-2 mr-sm-2" type="submit" >Your Stay</button>
              </li>
              <li class="nav-item"id="bot" style = "display:none">
                <button class="btn btn-primary my-2 mr-sm-2" type="submit" >Bot</button>
              </li>  
              <li class="nav-item">
                <button class="btn btn-primary my-2 mr-sm-0" onclick="signOut()" type="submit">Logout</button>
            </li> 
        
        </ul>
      </div>
    </div>
  </nav>

  <!-- Page Content -->
  <div class="container">

    <!-- Jumbotron Header -->
    <header class="jumbotron my-4">
      <h1 class="display-3"></h1>
      <!--<p class="lead"></p>-->
      <!--<a href="#" class="btn btn-primary btn-lg">Call to action!</a>-->
    </header>

    <!-- Page Features -->
    <!--<div class="row text-center " id="carddisplay">-->
    <!--<div class="col-lg-3 col-md-3 mb-4">
        <div class="card h-70">
        <div class="card-body">
        <h4 class="card-title" id = "cardtitle">User Dashboard</h4>
        <p class="card-text" id = "cardtext" >Manage profile and booking </p>
        </div>
        <div class="card-footer">
        <button class="btn btn-primary" type = "submit" value = "submit"> Select </button>
        </div>
        </div>
    </div>
    <div class="col-lg-3 col-md-3 mb-4">
        <div class="card h-70">
        <div class="card-body">
        <h4 class="card-title" id = "cardtitle">Your Stay</h4>
        <p class="card-text" id = "cardtext" >Manage your amenities</p>
        </div>
        <div class="card-footer">
        <button class="btn btn-primary" type = "submit" value = "submit"> Select </button>
        </div>
        </div>
    </div>-->
    <div class="bs-example shadow p-3 mb-5 bg-white rounded" id="coll" style="display:none;">
      <div class="accordion" id="accordionExample">
          <div class="card">
              <div class="card-header" id="headingOne">
                  <h2 class="mb-0">
                      <button type="button" class="btn btn-link"  data-toggle="collapse" data-target="#collapseOne">1. View Reservation</button>									
                  </h2>
              </div>
              <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
                  <div class="card-body" id="viewblankrecords" style="display: none;">
                    <h5 id = "displaymessage"></h5>
                  </div>
                  <div class="card-body" id="viewreservation">
                    <p>
                    <h5 class="card-title">Reservation Details:</h5>
                    <p class="card-text" id="checkin">Checkin-Date:</p>
                    <p class="card-text" id="checkout">checkout-Date:</p>
                    <p class="card-text" id="hotelname">Hotel Name:</p>
                    <p class="card-text" id="roomnumber">Room Number:</p>
                    <p class="card-text" id="hoteladdress">Hotel Address:</p>
                    <p class="card-text" id="hotelzipcode">Hotel Zipcode:</p>
                    <button class="btn btn-primary mr-sm-2" type="submit" id="cancelres" onclick="cancelReservation()" data-toggle="modal" data-target="#exampleModalCenter">Cancel Reservation</button>
                    <button type="button" class="btn btn-primary my-2 mr-sm-0" id="extendcheckout" data-toggle="modal" data-target="#myExtendModal">
                      Extend Checkout
                    </button>
                    </p>
                    <div class="modal" id="myExtendModal">
                      <div class="modal-dialog">
                        <div class="modal-content">

                          <div class="modal-header">
                            <h4 class="modal-title">Extend Your Stay</h4>
                            <button type="button"  class="close" data-dismiss="modal">&times;</button>
                          </div>

                          <div class="modal-body" >
                            <div class="card-body">
                              <form class="form" role="form" autocomplete="off">
                                <div class="form-group row">
                                    <label class="col-lg-3 col-form-label datepickerto form-control-label">ChecOut-Date</label>
                                    <div class="col-lg-9">
                                      <input class="form-control" id="datepickerto"  type="date" required>
                                    </div>
                                </div>
                                <div class="alert alert-success" id="alert" role="alert" style="display: none;">
                                </div>
                              </form>
                            </div>
                          </div>

                          <!-- Modal footer -->
                              <div class="modal-footer">
                                <button type="button" class="btn btn-primary" onclick="updateCheckOut()">Extend</button>
                                <button type="button" class="btn btn-primary" onclick="retreiveReservation()"data-dismiss="modal">Close</button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </p>
                  </div>
              </div>
          </div>
          <div class="card">
              <div class="card-header" id="headingTwo">
                  <h2 class="mb-0">
                      <button type="button" class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTwo">2. CheckIn</button>
                  </h2>
              </div>
              <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
                  <div class="card-body">
                      <div class="alert alert-success" id="alertsuccess" role="alert" style="display: none;">
                      </div>
                      <div class="alert alert-warning" id="alertfailure" role="alert" style="display: none;">
                      </div>
                     <button type="button" class="btn btn-primary mr-sm-2" id = "checkinbutton" data-toggle="modal" onclick="checkIn()" data-target="#myModal">
                          Scan Your Confirmation Number
                        </button>
                        <button type = "button" class="btn btn-primary my-2 mr-sm-0" id="servicebutton" onclick= "enableServices()">Enable Services</button>
                        <!-- The Modal -->
                        <div class="modal" id="myModal">
                          <div class="modal-dialog modal-fullscreen">
                            <div class="modal-content">
      
                              <!-- Modal Header -->
                              <!--<div class="modal-header">
                                <h7 class="modal-title"></h7>
                                <button type="button"  class="close" data-dismiss="modal">&times;</button>
                              </div>-->
        
                              <!-- Modal body -->
                              <div class="modal-body" >
                                <h1 class = "text-center align-middle"id="modalb" style="height: 350px;"></h1>
                                
                                <script type = "text/javascript">
                                  document.getElementById('modalb').innerText = sessionStorage.getItem('res_id');
                                </script>
                              </div>
        
                              <!-- Modal footer -->
                              <div class="modal-footer">
                                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                              </div>
                            </div>
                          </div>
                        </div>
                  </div>
              </div>
          </div>
          <div class="card">
              <div class="card-header" id="headingThree">
                  <h2 class="mb-0">
                      <button type="button" class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseThree">3. Profile Details</button>                     
                  </h2>
              </div>
              <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
                  <div class="card-body" id="profile">
                    <p>
                      <h5 class="card-title">Profile Details:</h5>
                      <p class="card-text" id="cname">Customer Name:</p>
                      <p class="card-text" id="email">Email Address:</p>
                      <p class="card-text" id="mail">Mailing Address:</p>
                      <p class="card-text" id="phno">Contact Number:</p>
                      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myUpdateModal">
                        Update
                      </button>
                      </p>
                      <!-- The Modal -->
                      <div class="modal" id="myUpdateModal">
                        <div class="modal-dialog">
                          <div class="modal-content">
      
                            <!-- Modal Header -->
                            <div class="modal-header">
                              <h4 class="modal-title">Update details</h4>
                              <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>
        
                            <!-- Modal body -->
                            <div class="modal-body">
                              <div class="card-body">
                                <form class="form" role="form" autocomplete="off">
                                    <div class="form-group row">
                                        <label class="col-lg-3 col-form-label form-control-label">Name</label>
                                        <div class="col-lg-9">
                                            <input class="form-control" id="cust_name" type="text">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                      <label class="col-lg-3 col-form-label form-control-label">Email Address</label>
                                      <div class="col-lg-9">
                                          <input class="form-control" id="e_address" type="text">
                                      </div>
                                    </div>
                                    <div class="form-group row">
                                      <label class="col-lg-3 col-form-label form-control-label">Mailing Address</label>
                                      <div class="col-lg-9">
                                          <input class="form-control" id="m_address" type="text">
                                      </div>
                                    </div>
                                    <div class="form-group row">
                                      <label class="col-lg-3 col-form-label form-control-label">Contact Number</label>
                                      <div class="col-lg-9">
                                          <input class="form-control" id="c_number" type="text">
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                  <div class="alert alert-success" id="alertupdate" role="alert" style="display: none;">
                                  </div>
                                </div>
                                </form>
                              </div>
                            </div>
        
                            <!-- Modal footer -->
                            <div class="modal-footer">
                              <button type="submit" class="btn btn-primary" onclick="updateCustomer()">Save</button>
                              <button type="button" class="btn btn-primary" onclick="retreiveCustomer()"data-dismiss="modal">Close</button>
                            </div>
        
                          </div>
                        </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>

  <!--</div>-->
    <!-- /.row -->

  </div>
  <!-- /.container -->
  <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <!--<h5 class="modal-title" id="exampleModalLongTitle"></h5>-->
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <h4 id = "modalbody"></h4>
          <!--<button type="button" class="btn btn-primary" data-dismiss="modal"  >Close</button>-->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" onclick="retreiveReservation()"data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="py-5 i  mb-0" id = "footer" style="background-color:  #ff9800;">
    <div class="container mb-0">
      <p class="m-0 text-center text-white">Copyright &copy; ezeehotel.com</p>
    </div>
    <!-- /.container -->
  </footer>

  <!-- Bootstrap core JavaScript -->
  <!--<script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>-->
  <script>
    $(".dropdown-menu a ").click(function(){
      $(this).parents(".dropdownshow").find('.btn').text($(this).text());
    });

    $(".dropdown-menu a ").click(function(){
      var text = $(this).parents(".dropdownguests").find('.btn').text($(this).text());
    
    });
  </script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="search.js"></script>
  <script src="amazon-cognito-identity.min.js"></script>
  <script src="config.js"></script>
  <script src="dashboard.js"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous">
    </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js"></script>
</body>
</html>
